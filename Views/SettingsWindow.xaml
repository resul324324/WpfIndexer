<Window x:Class="WpfIndexer.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfIndexer.Views"
        xmlns:models="clr-namespace:WpfIndexer.Models"
        xmlns:helpers="clr-namespace:WpfIndexer.Helpers"
        mc:Ignorable="d"
        Title="Ayarlar" Height="460" Width="450"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        Background="{DynamicResource WindowBackgroundColor}"
        Foreground="{DynamicResource TextColor}">

    <Window.Resources>
        <helpers:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Başlık -->
        <TextBlock Grid.Row="0" Text="Uygulama Ayarları"
                   FontSize="18" FontWeight="Bold"
                   Margin="0,0,0,10"/>

        <!-- İçerik + Butonlar -->
        <StackPanel Grid.Row="1" Margin="0,0,0,-14" Grid.RowSpan="2">
            <!-- Arama Ayarları -->
            <TextBlock Text="Arama Ayarları" FontWeight="SemiBold" FontSize="14" Margin="0,10,0,5"/>
            <Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" Padding="10" CornerRadius="4">
                <StackPanel>
                    <CheckBox Content="Arama Geçmişini Kaydet"
                              IsChecked="{Binding Settings.SaveSearchHistory}"/>
                    <CheckBox Content="Arama Önerilerini Göster (Geçmişe göre)"
                              Margin="2,5,0,0"
                              IsChecked="{Binding Settings.ShowSearchSuggestions}"/>
                    <TextBlock Text="Varsayılan Arama Sonuç Limiti:" Margin="0,10,0,5"/>
                    <TextBox Text="{Binding Settings.DefaultSearchResultLimit}"
                             Width="100" HorizontalAlignment="Left"/>
                    <Button Content="Arama Geçmişini Şimdi Temizle"
                            Style="{StaticResource BrandButton}"
                            Command="{Binding ClearSearchHistoryCommand}"
                            Margin="0,15,0,0"
                            HorizontalAlignment="Left"
                            Width="200" Height="26"/>
                </StackPanel>
            </Border>

            <!-- Gelişmiş Ayarlar -->
            <TextBlock Text="Gelişmiş Ayarlar" FontWeight="SemiBold" FontSize="14" Margin="0,15,0,5"/>
            <Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" Padding="10" CornerRadius="4">
                <StackPanel>
                    <CheckBox Content="Detaylı (Verbose) Loglamayı Etkinleştir"
                              ToolTip="Hata ayıklama için daha fazla sistem detayı kaydeder. 'system.log' dosyasını büyütür."
                              IsChecked="{Binding Settings.EnableVerboseLogging}"/>
                    <CheckBox Content="Otomatik İndeks Güncellemeyi Etkinleştir"
                              ToolTip="Uygulama başladığında ve kaynak klasörlerde değişiklik olduğunda indeksleri arka planda sessizce günceller."
                              IsChecked="{Binding Settings.AutoUpdateEnabled}"
                              Margin="2,5,0,0"/>
                </StackPanel>
            </Border>

            <!-- Butonlar -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Content="Kaydet ve Kapat"
                        Style="{StaticResource BrandButton}"
                        IsDefault="True"
                        Command="{Binding SaveAndCloseCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                        Width="120" Height="26" Margin="0,0,8,0"/>
                <Button Content="İptal"
                        Style="{StaticResource BrandButton}"
                        IsCancel="True"
                        Width="120" Height="26"/>
            </StackPanel>
        </StackPanel>

        <!-- ScrollViewer kaldırıldı, içerik zaten sığacak şekilde optimize edildi -->
    </Grid>
</Window>