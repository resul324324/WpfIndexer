<Window x:Class="WpfIndexer.Views.IndexManagementWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfIndexer.Views"
        mc:Ignorable="d"
        Title="İndeks Yönetimi" Height="450" Width="771"
        WindowStartupLocation="CenterOwner" MinHeight="300" MinWidth="400"
        Background="{DynamicResource WindowBackgroundColor}">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Kayıtlı İndeksler" FontWeight="Bold" Margin="0,0,0,4" 
                   Foreground="{DynamicResource TextColor}"/>

        <ListView Grid.Row="1" 
                 ItemsSource="{Binding SettingsService.Indexes}" 
                 SelectedItem="{Binding SelectedIndex}"
                 HorizontalContentAlignment="Stretch"
                 BorderBrush="{DynamicResource BorderColor}"
                 Background="{DynamicResource WindowBackgroundColor}" Margin="0,0,0,20">

            <ListView.View>
                <GridView>
                    <GridViewColumn Header="İndeks Adı" Width="150">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox Content="{Binding Name}"
                                          IsChecked="{Binding IsSelected}"
                                          ToolTip="{Binding IndexPath}"
                                          Style="{StaticResource BrandCheckBox}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Eklenme Tarihi" Width="130"
                                    DisplayMemberBinding="{Binding CreationDate, StringFormat='g'}" />

                    <GridViewColumn Header="Son Güncelleme" Width="130"
                                    DisplayMemberBinding="{Binding LastUpdateDate, StringFormat='g'}" />
                    <GridViewColumn Header="Yol" Width="300"
                                    DisplayMemberBinding="{Binding IndexPath}" />
                </GridView>
            </ListView.View>
        </ListView>

        <Border Grid.Row="1" Background="#80FFFFFF"
                Visibility="{Binding IsLoadingMetadata, Converter={StaticResource BooleanToVisibilityConverter}}" Margin="0,0,0,20">
            <TextBlock Text="Meta veriler yükleniyor..." HorizontalAlignment="Center" VerticalAlignment="Center"
                       FontWeight="Bold" Foreground="{DynamicResource TextColor}"/>
        </Border>

        <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center" Width="636" Height="34" Margin="47,0,0,0" HorizontalAlignment="Left">
            <Button Content="Yeni İndeks Oluştur" 
                    Style="{StaticResource BrandButton}"
                    Command="{Binding CreateIndexCommand}" Width="135" Margin="10,4,10,4" />
            <Button Content="Mevcut İndeksi Ekle" 
                    Style="{StaticResource BrandButton}"
                    Command="{Binding AddExistingIndexCommand}" Margin="10,4,10,4" Width="135" />
            <Button Content="Güncelle" 
                    Style="{StaticResource BrandButton}"
                    Command="{Binding UpdateIndexCommand}"
                    ToolTip="Seçili (tick) olan ve kaynak yolu bilinen indeksleri günceller" Margin="10,4,10,4" Width="135"/>
            <Button Content="Sil" 
                    Style="{StaticResource BrandButton}"
                    Command="{Binding DeleteIndexCommand}"
                    ToolTip="Seçili (tick) olan indeksleri listeden kaldırır" Margin="10,4,10,4" Width="135"/>
        </StackPanel>
    </Grid>
</Window>